<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Marriott Tour</title>
<style>
body, html { margin:0; padding:0; height:100%; width:100%; overflow:hidden; font-family:sans-serif; background:#000; color:#fff; }
#preview { position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:0; background:#181818; overflow:hidden; }
#fp-corridor { position:relative; width:100vw; height:100vh; perspective:1800px; overflow:hidden; }
.fp-wall { position:absolute; top:0; width:30vw; height:100vh; background:linear-gradient(90deg,#232323 60%,#444 100%); z-index:2; box-shadow:inset 0 0 60px #000a; }
.fp-wall-left { left:0; border-right:6px solid #222; }
.fp-wall-right { right:0; border-left:6px solid #222; }
.fp-ceiling { position:absolute; left:0; top:0; width:100vw; height:18vh; background:linear-gradient(180deg,#333 60%,#222 100%); z-index:3; box-shadow:0 8px 32px #000a; }
.fp-floor { position:absolute; left:0; bottom:0; width:100vw; height:22vh; background:linear-gradient(0deg,#222 60%,#444 100%); z-index:3; box-shadow:0 -8px 32px #000a; }
.fp-doors { position:absolute; top:32vh; left:0; width:100vw; height:36vh; z-index:5; }
.fp-door { position:absolute; top:0; width:5vw; height:18vh; background:#444; border-radius:8px; border:3px solid #222; color:#fff; font-size:1.2em; display:flex; align-items:center; justify-content:center; box-shadow:0 2px 12px #0008; cursor:pointer; transition:background 0.3s, box-shadow 0.3s; }
.fp-door.locked { background:#333; }
.fp-door.unlocked { background:#4caf50; }
.fp-door span { position:absolute; bottom:-2.2em; left:50%; transform:translateX(-50%); font-size:0.9em; opacity:0.7; }
.fp-elevator { position:absolute; left:48vw; top:10vh; width:8vw; height:12vh; background:#888; border-radius:10px; border:3px solid #222; display:flex; align-items:center; justify-content:center; font-size:2em; box-shadow:0 2px 12px #0008; z-index:10; cursor:pointer; transition:background 0.3s; }
.fp-pool { position:absolute; right:8vw; bottom:12vh; width:10vw; height:7vh; background:radial-gradient(circle at 60% 40%,#aeefff 70%,#2196f3 100%); border-radius:18px 30px 30px 18px/30px 18px 30px 30px; border:3px solid #1976d2; box-shadow:0 2px 12px #0008; display:flex; align-items:center; justify-content:center; color:#fff; font-size:1.5em; z-index:10; cursor:pointer; }
.fp-fade { position:absolute; left:0; top:0; width:100vw; height:100vh; pointer-events:none; background:rgba(0,0,0,0); z-index:99; transition:background 0.4s; }
.fp-floor-label { position:absolute; left:50%; top:2vh; transform:translateX(-50%); color:#fff; font-size:1.3em; background:rgba(0,0,0,0.4); padding:4px 18px; border-radius:12px; z-index:20; letter-spacing:2px; }
#preview-content {
#preview-content {
  width:420px;
  height:320px;
  margin:auto;
  position:relative;
  background: #222 linear-gradient(160deg,#333 60%,#444 100%);
  border-radius:24px;
  box-shadow:0 8px 32px #000a;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  overflow:hidden;
}
.room {
  width:100%; height:100%; position:relative;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
}
.door {
  position:absolute; left:50%; top:40px; transform:translateX(-50%);
  width:80px; height:140px; background:#444; border-radius:10px 10px 8px 8px; border:4px solid #222;
  box-shadow:0 4px 16px #0008;
  display:flex; align-items:center; justify-content:center;
  transition:background 0.4s;
}
.door.locked { background:#333; }
.door.unlocked { background:#4caf50; }
.door-label {
  position:absolute; bottom:-28px; left:50%; transform:translateX(-50%);
  color:#fff; font-size:1.1em; opacity:0.7;
}
.bed {
  position:absolute; bottom:30px; left:50%; transform:translateX(-50%);
  width:120px; height:36px; background:#888; border-radius:12px 12px 18px 18px; box-shadow:0 2px 8px #0006;
}
.window {
  position:absolute; right:30px; top:30px; width:48px; height:48px; background:#aeefff; border-radius:8px; box-shadow:0 0 0 2px #fff4;
}
.carpet {
  position:absolute; bottom:10px; left:50%; transform:translateX(-50%);
  width:90px; height:18px; background:#bfa76f; border-radius:9px; opacity:0.7;
}
.person {
  position:absolute; left:50%; bottom:60px; transform:translateX(-50%);
  width:32px; height:60px;
  display:flex; flex-direction:column; align-items:center;
}
.person-head { width:28px; height:28px; background:#ffe0b2; border-radius:50%; border:2px solid #c9a66b; }
.person-body { width:18px; height:32px; background:#1976d2; border-radius:8px; margin-top:-4px; }

#controls, #scene, #lift { z-index:2; position:relative; }
</style>
</head>
<body>
<div id="preview">
  <div id="fp-corridor">
    <div class="fp-wall fp-wall-left"></div>
    <div class="fp-wall fp-wall-right"></div>
    <div class="fp-ceiling"></div>
    <div class="fp-floor"></div>
    <div class="fp-doors">
      <!-- Doors will be generated by JS -->
    </div>
    <div class="fp-elevator" id="fp-elevator" onclick="move('^')">üõó Elevator</div>
    <div class="fp-pool" id="fp-pool" onclick="move('v')">üèä‚Äç‚ôÇÔ∏è Pool</div>
    <div class="fp-fade" id="fp-fade"></div>
    <div class="fp-floor-label" id="fp-floor-label"></div>
  </div>
</div>
<div id="controls" style="position:fixed;top:10px;left:10px;z-index:9;text-align:center">
  <button onclick="move('^')">^</button><br>
  <button onclick="move('<')"><</button>
  <button onclick="useKeycard()">üé´</button>
  <button onclick="move('>')">></button><br>
  <button onclick="showLift()">Select Level</button>
</div>


<div id="scene" style="height:100vh;display:flex;justify-content:center;align-items:center;font-size:2em">üîí Room 1545 locked</div>
<div id="swim-modal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,32,0.92);z-index:1000;align-items:center;justify-content:center;flex-direction:column;">
  <div style="background:#222;border-radius:18px;padding:32px 48px;box-shadow:0 8px 32px #000a;display:flex;flex-direction:column;align-items:center;">
    <div style="font-size:2em;color:#aeefff;margin-bottom:12px;">üèä‚Äç‚ôÇÔ∏è Texas Pool</div>
    <svg width="320" height="180" viewBox="0 0 320 180" style="background:#2196f3;border-radius:24px;box-shadow:0 2px 16px #0008;">
      <!-- Square pool -->
      <rect x="20" y="30" width="280" height="120" rx="24" fill="#aeefff" stroke="#1976d2" stroke-width="6"/>
      <!-- Texas outline (approximate) -->
      <path d="M80,120 l10,-30 l-10,-20 l20,-10 l10,10 l10,-20 l20,10 l10,20 l20,0 l10,10 l20,-10 l10,20 l-10,20 l-20,10 l-10,20 l-20,0 l-10,-10 l-20,10 l-10,-20 l-20,-10 z" fill="#2196f3" stroke="#fff" stroke-width="3" opacity="0.7"/>
      <!-- Lazy river path -->
      <path d="M60,90 Q80,40 160,60 Q240,80 260,130" fill="none" stroke="#fff" stroke-width="8" stroke-linecap="round"/>
      <text x="160" y="100" text-anchor="middle" font-size="32" fill="#fff" font-family="Arial">TEXAS</text>
    </svg>
    <div style="margin:18px 0 0 0;font-size:1.2em;color:#fff;">You are swimming in the Texas-shaped lazy river!</div>
    <button onclick="closeSwim()" style="margin-top:18px;font-size:1.1em;padding:8px 24px;border-radius:8px;background:#1976d2;color:#fff;border:none;cursor:pointer;">Done Swimming</button>
  </div>
</div>

<div id="lift" style="display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#222;padding:10px;border-radius:8px">
  <div>Select a floor:</div>
  <div id="floors"></div>
</div>

<script>
// Corridor logic for many rooms
const ROOMS_PER_FLOOR = 20;
let corridorIndex = 5; // Start at 6th room (index 5)
let roomNumbers = [];

function generateRooms() {
  // E.g. for floor 15: 1540-1559 (20 rooms)
  const base = currentFloor * 100 + 40;
  roomNumbers = [];
  for (let i = 0; i < ROOMS_PER_FLOOR; i++) {
    roomNumbers.push(base + i);
  }
}

function renderDoors() {
  const doorsDiv = document.querySelector('.fp-doors');
  doorsDiv.innerHTML = '';
  // Show 3 doors: left, center, right (relative to corridorIndex)
  for (let offset = -1; offset <= 1; offset++) {
    const idx = corridorIndex + offset;
    if (idx < 0 || idx >= roomNumbers.length) continue;
    const num = roomNumbers[idx];
    const div = document.createElement('div');
    div.className = 'fp-door' + (num === 1545 && currentFloor === ROOM_FLOOR ? (access ? ' unlocked' : ' locked') : '');
    div.style.left = offset === -1 ? '18%' : offset === 0 ? '50%' : '82%';
    div.setAttribute('data-room', num);
    div.onclick = () => enterRoom(offset);
    const span = document.createElement('span');
    span.innerText = num;
    div.appendChild(span);
    div.id = offset === -1 ? 'door-left' : offset === 0 ? 'door-center' : 'door-right';
    doorsDiv.appendChild(div);
  }
}

let access = false;
let position = 'center'; // left, center, right
let currentFloor = 15; // Start at 15th floor (room 1545)
const POOL_FLOOR = 6;
const ROOM_FLOOR = 15;
const FLOORS = 29;
let depth = 0; // 0 = at doors, 1 = at elevator/pool

function move(dir) {
  const fade = document.getElementById('fp-fade');
  if (dir === '^') {
    if (depth === 0) {
      fade.style.background = 'rgba(0,0,0,0.7)';
      setTimeout(() => {
        depth = 1;
        updateCorridor();
        fade.style.background = 'rgba(0,0,0,0)';
        document.getElementById('scene').innerText = `üõó At Elevator (Floor ${currentFloor})`;
        showLift();
      }, 350);
    }
    return;
  }
  if (dir === 'v') {
    if (depth === 0 && currentFloor === POOL_FLOOR) {
      fade.style.background = 'rgba(0,0,0,0.7)';
      setTimeout(() => {
        depth = 1;
        updateCorridor();
        fade.style.background = 'rgba(0,0,0,0)';
        swim();
      }, 350);
    } else if (currentFloor !== POOL_FLOOR) {
      document.getElementById('scene').innerText = `üèä‚Äç‚ôÇÔ∏è Pool is on Floor ${POOL_FLOOR}`;
    }
    return;
  }
  if (dir === '<') {
    if (position === 'center') position = 'left';
    else if (position === 'right') position = 'center';
  } else if (dir === '>') {
    if (position === 'center') position = 'right';
    else if (position === 'left') position = 'center';
  }
  updateCorridor();
}

function swim(){
  document.getElementById('swim-modal').style.display = 'flex';
  document.getElementById('scene').innerText = 'üèä‚Äç‚ôÇÔ∏è Swimming in the Texas Pool!';
}
function closeSwim(){
  document.getElementById('swim-modal').style.display = 'none';
  document.getElementById('scene').innerText = 'Done swimming!';
}

function useKeycard(){
  if(currentFloor !== ROOM_FLOOR){
    document.getElementById('scene').innerText = `Room 1545 is on Floor ${ROOM_FLOOR}`;
    return;
  }
  access = true;
  document.getElementById('scene').innerText = '‚úÖ Access granted to Room 1545';
  document.getElementById('room-center').classList.remove('locked');
  document.getElementById('room-center').classList.add('unlocked');
}

function updateCorridor() {
  // Animate camera position and depth
  const fpCorridor = document.getElementById('fp-corridor');
  let x = 0;
  if (position === 'left') x = -22;
  else if (position === 'right') x = 22;
  let z = 0;
  if (depth === 1) z = -32;
  fpCorridor.style.transform = `translateZ(0) translateX(${x}vw) translateY(0) scale(1) perspective(1800px) rotateY(${-x/2}deg) translateZ(${z}vh)`;

  // Highlight doors
  document.getElementById('door-left').style.boxShadow = position==='left'&&depth===0?'0 0 24px #fff8':'0 2px 12px #0008';
  document.getElementById('door-center').style.boxShadow = position==='center'&&depth===0?'0 0 24px #fff8':'0 2px 12px #0008';
  document.getElementById('door-right').style.boxShadow = position==='right'&&depth===0?'0 0 24px #fff8':'0 2px 12px #0008';

  // Show/hide elevator/pool
  document.getElementById('fp-elevator').style.opacity = (depth===1)?1:0.3;
  document.getElementById('fp-pool').style.opacity = (depth===1 && currentFloor===POOL_FLOOR)?1:0.3;

  // Floor label
  document.getElementById('fp-floor-label').innerText = `Floor ${currentFloor}` + (currentFloor===POOL_FLOOR?' (Pool)':'') + (currentFloor===ROOM_FLOOR?' (1545)':'');

  // Update scene text
  if(currentFloor === POOL_FLOOR){
    document.getElementById('scene').innerText = 'At Pool Floor (6)';
  } else if(currentFloor === ROOM_FLOOR){
    if (position === 'left') document.getElementById('scene').innerText = 'At Room 1544 (Floor 15)';
    else if (position === 'right') document.getElementById('scene').innerText = 'At Room 1546 (Floor 15)';
    else document.getElementById('scene').innerText = access ? 'At Room 1545 (Unlocked, Floor 15)' : 'At Room 1545 (Locked, Floor 15)';
  } else {
    document.getElementById('scene').innerText = `On Floor ${currentFloor}`;
  }
}

function enterRoom(side) {
  if(currentFloor !== ROOM_FLOOR){
    document.getElementById('scene').innerText = `Room 1545 is on Floor ${ROOM_FLOOR}`;
    return;
  }
  if (side === 'center') {
    if (access) document.getElementById('scene').innerText = 'üö™ Entered Room 1545!';
    else document.getElementById('scene').innerText = 'üîí Room 1545 locked';
  } else {
    document.getElementById('scene').innerText = side === 'left' ? 'üö™ Entered Room 1544!' : 'üö™ Entered Room 1546!';
  }
}

document.addEventListener('keydown', function(e){
  if (e.key === 'ArrowDown' || e.key === 'v') move('v');
  if (e.key === 'ArrowUp' || e.key === '^') move('^');
  if (e.key === 'ArrowLeft' || e.key === '<') move('<');
  if (e.key === 'ArrowRight' || e.key === '>') move('>');
});

// Initial corridor setup
updateCorridor();

function showLift(){
  const f = document.getElementById('floors'); f.innerHTML = '';
  for(let i=1;i<=FLOORS;i++){
    const b=document.createElement('button');
    b.innerText='Level '+i+(i===POOL_FLOOR?' (Pool)':'')+(i===ROOM_FLOOR?' (1545)':'');
    b.onclick=()=>{
      currentFloor = i;
      document.getElementById('lift').style.display='none';
      updateCorridor();
      document.getElementById('scene').innerText = `üõó Arrived at Floor ${i}`;
    };
    f.appendChild(b);
  }
  document.getElementById('lift').style.display='block';
}
</script>
</body></html>
